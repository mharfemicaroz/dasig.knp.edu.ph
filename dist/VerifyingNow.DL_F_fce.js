import{_ as w}from"./logo.Dx3Q79ni.js";import{u as h,r as n,c as S,s as V,o as I,x as A,a as i,b as r,d as D,h as G,e,f as c,l as N,t as m,q as C}from"./index.BOknro1r.js";import{T}from"./ToasterComponent.Dz5A3hFA.js";import{_ as v}from"./BaseButton.w6EMXcGq.js";import{_ as L}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./BaseIcon.D7Rla7cl.js";const j={class:"min-h-screen relative overflow-hidden"},B={key:0,class:"absolute inset-0 z-50 grid place-items-center bg-black/40 backdrop-blur-md"},E={class:"relative z-10 min-h-screen flex items-center justify-center p-4"},z={class:"w-full max-w-md"},M={class:"group rounded-2xl bg-white/80 backdrop-blur-xl border border-white/40 shadow-2xl ring-1 ring-black/5 transition"},R={class:"p-6 sm:p-7 text-center"},q={key:0,class:"space-y-3"},Y={class:"text-sm text-gray-600"},F={key:1,class:"space-y-3"},H={class:"text-sm text-gray-600"},K={key:2,class:"space-y-3"},O={class:"px-6 sm:px-7 pb-6"},P={class:"flex items-center justify-between text-[11px] text-gray-500"},U=Object.assign({name:"VerifyingNow"},{__name:"VerifyingNow",setup($){const g=h(),b=V(),_=C(),a=n("loading"),o=n(3);let l=null;const s=n(""),d=n(null),p=S(()=>String(b.query.token||"")),y=()=>{l=setInterval(()=>{o.value>0&&(o.value-=1),o.value===0&&(clearInterval(l),u())},1e3)},u=()=>{_.replace({name:"login"})},x=async()=>{if(!p.value){a.value="error",s.value="Missing verification token.";return}try{await g.verifyEmail(p.value),a.value="success",d.value?.showToast?.("success","Email verified!"),y()}catch(f){a.value="error",s.value=f?.message||"Verification failed.",d.value?.showToast?.("warning",s.value)}},k=()=>{a.value="loading",s.value="",x()};return I(()=>{x()}),A(()=>{l&&clearInterval(l)}),(f,t)=>(r(),i("div",j,[t[8]||(t[8]=D('<div class="absolute inset-0" data-v-12d9ac55><div class="h-full w-full bg-cover bg-center" style="background-image:url(/images/bg.jpg)" data-v-12d9ac55></div><div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-black/60" data-v-12d9ac55></div><div class="absolute inset-0 backdrop-blur-sm" data-v-12d9ac55></div><div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,_rgba(255,255,255,.08),_transparent_40%),radial-gradient(circle_at_80%_0,_rgba(255,255,255,.06),_transparent_35%),radial-gradient(circle_at_50%_100%,_rgba(255,255,255,.05),_transparent_45%)]" data-v-12d9ac55></div></div>',1)),N(g).isLoading?(r(),i("div",B,[...t[0]||(t[0]=[e("div",{class:"loader"},null,-1)])])):G("",!0),e("div",E,[e("div",z,[t[7]||(t[7]=e("div",{class:"mb-6 text-center"},[e("img",{src:w,alt:"DASIG",class:"h-14 w-auto mx-auto"}),e("h1",{class:"mt-4 text-2xl font-extrabold tracking-wide text-white"}," DASIG – Dashboard for Academic Systems, Information & Governance "),e("p",{class:"mt-1 text-primary-text/90 text-sm"},"“DASIG: Energizing Academic Leadership and Governance.” ")],-1)),e("div",M,[e("div",R,[a.value==="success"?(r(),i("div",q,[t[1]||(t[1]=e("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-emerald-500/10 mx-auto"},[e("i",{class:"mdi mdi-check-decagram text-3xl text-emerald-600"})],-1)),t[2]||(t[2]=e("h2",{class:"text-lg font-bold text-gray-900"},"Your email is verified!",-1)),e("p",Y,"Redirecting to login in "+m(o.value)+"s…",1),c(v,{class:"mt-2",color:"primary",label:"Go to Login now",onClick:u})])):a.value==="error"?(r(),i("div",F,[t[3]||(t[3]=e("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-rose-500/10 mx-auto"},[e("i",{class:"mdi mdi-alert-circle-outline text-3xl text-rose-600"})],-1)),t[4]||(t[4]=e("h2",{class:"text-lg font-bold text-gray-900"},"Verification failed",-1)),e("p",H,m(s.value||"The link may be invalid or expired."),1),c(v,{class:"mt-2",color:"secondary",outline:"",label:"Try again",onClick:k}),c(v,{class:"mt-2 ml-2",color:"primary",label:"Back to Login",onClick:u})])):(r(),i("div",K,[...t[5]||(t[5]=[e("div",{class:"inline-grid h-12 w-12 place-items-center rounded-full bg-primary/10 mx-auto"},[e("i",{class:"mdi mdi-email-check-outline text-3xl text-primary"})],-1),e("h2",{class:"text-lg font-bold text-gray-900"},"Verifying your email…",-1),e("p",{class:"text-sm text-gray-600"},"Please wait a moment.",-1)])]))]),e("div",O,[e("div",P,[t[6]||(t[6]=e("span",null,"DASIG Kiosk v1.0",-1)),e("span",null,"© "+m(new Date().getFullYear())+" Student Services",1)])])])])]),c(T,{ref_key:"toast",ref:d},null,512)]))}}),te=L(U,[["__scopeId","data-v-12d9ac55"]]);export{te as default};
