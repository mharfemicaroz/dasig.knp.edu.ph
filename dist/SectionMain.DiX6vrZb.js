import{J as K,r as g,B as b,q as W,u as B,c as p,a as V,b as f,f as a,d as Q,k as Z,e as M,t as D,o as R,p as O,C as q,g as A,m as P,l as N,F as X,D as ee,w as te,h as E,z as ae,V as T}from"./index.30pC7lFG.js";import{_ as Y,T as se}from"./BaseIcon.DDP9Q-sB.js";import{_ as le}from"./_plugin-vue_export-helper.DlAUqK2U.js";const J=K("user",()=>{const i=g({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),e=g(!1),s=g(null),o=g(!1),l=g(null),y=g({}),h=g([]),H=g({}),L=g(null),v=g({}),u=g({}),C=g([]),d=g(null),c=r=>{if(!r?.id)return;const n=i.value.data.findIndex(t=>t.id===r.id);n!==-1&&(i.value.data[n]=r)};return{users:i,selectedUser:l,selectedUserClubs:h,clubsByUser:y,selectedUserClub:L,selectedUserDepartments:C,selectedUserDepartment:d,departmentsByUser:v,departmentInfoCache:u,isLoading:e,error:s,isLoaded:o,fetchAll:async(r={},n=!1)=>{if(s.value=null,!(!n&&o.value))try{e.value=!0;const t=await b.list(r);Object.assign(i.value,{total:t.total||0,totalPages:t.totalPages||1,currentPage:r.page||1,pageSize:r.limit||10,data:t.data||[]}),o.value=!0}catch(t){s.value=t?.response?.data?.message||t?.message||"Failed to fetch users"}finally{e.value=!1}},fetchById:async r=>{s.value=null;try{e.value=!0;const n=await b.getById(r);l.value=n,c(n)}catch(n){s.value=n?.response?.data?.message||n?.message||"Failed to fetch user"}finally{e.value=!1}},create:async r=>{s.value=null;try{e.value=!0;const n=await b.create(r);i.value.data.push(n),i.value.total+=1}catch(n){s.value=n?.response?.data?.message||n?.message||"Failed to create user"}finally{e.value=!1}},updateById:async(r,n)=>{s.value=null;try{e.value=!0;const t=await b.updateById(r,n);return c(t),l.value?.id===r&&(l.value=t),t}catch(t){throw s.value=t?.response?.data?.message||t?.message||"Failed to update user",t}finally{e.value=!1}},deleteById:async r=>{s.value=null;try{e.value=!0,await b.delete(r),i.value.data=i.value.data.filter(n=>n.id!==r),i.value.total=Math.max(0,(i.value.total||1)-1),l.value?.id===r&&(l.value=null)}catch(n){s.value=n?.response?.data?.message||n?.message||"Failed to delete user"}finally{e.value=!1}},uploadAvatar:async(r,n)=>{s.value=null;try{e.value=!0;const t=await b.uploadAvatar(r,n);return c(t),l.value?.id===r&&(l.value=t),t}catch(t){throw s.value=t?.response?.data?.message||t?.message||"Failed to upload avatar",t}finally{e.value=!1}},uploadCover:async(r,n)=>{s.value=null;try{e.value=!0;const t=await b.uploadCover(r,n);return c(t),l.value?.id===r&&(l.value=t),t}catch(t){throw s.value=t?.response?.data?.message||t?.message||"Failed to upload cover",t}finally{e.value=!1}},changePassword:async({old_password:r,new_password:n})=>{s.value=null;try{return e.value=!0,await b.changePassword({old_password:r,new_password:n})}catch(t){throw s.value=t?.response?.data?.message||t?.message||"Failed to change password",t}finally{e.value=!1}},fetchUserClubs:async()=>[],fetchUserClub:async()=>null,fetchUserDepartments:async(r,n=!1)=>{s.value=null;try{if(e.value=!0,!n&&Array.isArray(v.value[r]))return C.value=v.value[r],C.value;const t=await b.getDepartments(r);return v.value[r]=t,C.value=t,t}catch(t){throw s.value=t?.response?.data?.message||t?.message||"Failed to fetch user departments",t}finally{e.value=!1}},fetchUserDepartment:async(r,n,t=!1)=>{s.value=null;const j=`${r}:${n}`;try{if(e.value=!0,!t&&u.value[j])return d.value=u.value[j],d.value;const _=await b.getDepartmentInfo(r,n);return u.value[j]=_,d.value=_,_}catch(_){throw s.value=_?.response?.data?.message||_?.message||"Failed to fetch department info",_}finally{e.value=!1}},resetStore:()=>{i.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},l.value=null,h.value=[],H.value={},L.value=null,o.value=!1,e.value=!1,s.value=null}}}),re=""+new URL("images/logo-banner.png",import.meta.url).href,ne=""+new URL("images/logo-sm.png",import.meta.url).href,oe={class:"flex justify-between items-center px-4 sm:px-6 py-3 bg-primary text-white"},ie={class:"flex items-center gap-3"},ue={class:"relative flex items-center gap-2"},ce=["aria-expanded"],de={class:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 grid place-items-center ring-1 ring-gray-200"},ve=["src"],me={key:1,class:"h-full w-full grid place-items-center text-gray-700 text-xs font-semibold"},pe={class:"font-medium truncate max-w-[12rem] text-left hidden sm:block"},fe={key:1,class:"absolute right-0 top-full mt-2 z-40 w-64 sm:w-80"},ge={class:"relative bg-white text-gray-900 rounded-xl shadow-2xl ring-1 ring-black/5 overflow-hidden"},Ve={class:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center ring-1 ring-gray-200"},he=["src"],He={key:1,class:"mdi mdi-account text-gray-400 text-xl"},Ce={class:"min-w-0 flex-1 text-left"},ye={class:"text-xs text-gray-500 truncate"},Le={class:"px-4 py-2 bg-gray-50 border-t border-gray-200"},be={__name:"AppHeader",props:{avatarSrc:{type:String,default:""},open:{type:Boolean,default:!0}},emits:["toggle","request-logout"],setup(i){const e=W(),s=B();J();const o=g(!1),l=()=>{o.value=!o.value},y=p(()=>{const v=s.user?.first_name??"",u=s.user?.last_name??"";return[v,u].filter(Boolean).join(" ")||s.user?.email||""}),h=p(()=>{const v=s.user?.avatar;return v?typeof v=="string"?v:typeof v=="object"&&(v.image||v.url)||"":""}),H=v=>String(v||"").split(" ").map(u=>u[0]).join("").slice(0,2).toUpperCase(),L=()=>{o.value=!1,e.push({name:"profile"})};return(v,u)=>(f(),V("div",oe,[a("div",ie,[a("button",{class:"focus:outline-none p-2 rounded hover:bg-white/10",onClick:u[0]||(u[0]=C=>v.$emit("toggle")),"aria-label":"Toggle sidebar"},[a("i",{class:Z(["mdi",i.open?"mdi-menu-open":"mdi-menu","text-white","text-2xl"])},null,2)]),u[3]||(u[3]=Q('<div class="logo-box flex items-center gap-3"><a href="javascript:void(0)" class="flex items-center"><img src="'+re+'" alt="DASIG" class="hidden md:block" width="158" height="45"><img src="'+ne+'" alt="DASIG" class="block md:hidden" width="36" height="36"></a><span class="hidden lg:block text-sm leading-4 max-w-[18rem]"><span class="font-semibold">DASIG</span><span class="opacity-90"> – Dashboard for Academic Systems, Information &amp; Governance</span></span></div>',1))]),a("nav",ue,[a("button",{class:"flex items-center gap-2 pl-1 pr-2 py-1 rounded-full bg-transparent text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/30",onClick:l,"aria-expanded":o.value?"true":"false"},[a("div",de,[h.value?(f(),V("img",{key:0,src:h.value,alt:"Avatar",class:"h-full w-full object-cover"},null,8,ve)):(f(),V("div",me,D(H(y.value)),1))]),a("span",pe,D(y.value),1),a("i",{class:Z(["mdi",o.value?"mdi-chevron-up":"mdi-chevron-down","text-lg text-white/90"])},null,2)],8,ce),o.value?(f(),V("div",{key:0,class:"fixed inset-0 z-30",onClick:u[1]||(u[1]=C=>o.value=!1)})):M("",!0),o.value?(f(),V("div",fe,[u[8]||(u[8]=a("div",{class:"absolute right-4 sm:right-6 -top-2 h-3 w-3 rotate-45 bg-white ring-1 ring-black/5"},null,-1)),a("div",ge,[u[7]||(u[7]=a("div",{class:"px-4 py-3 border-b bg-gray-50"},[a("div",{class:"text-[11px] uppercase tracking-wide text-gray-500"},"Account")],-1)),a("button",{class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50",onClick:L},[a("div",Ve,[i.avatarSrc?(f(),V("img",{key:0,src:i.avatarSrc,alt:"avatar",class:"h-full w-full object-cover"},null,8,he)):(f(),V("i",He))]),a("div",Ce,[u[4]||(u[4]=a("div",{class:"text-sm font-medium truncate"},"See your profile",-1)),a("div",ye,D(y.value),1)]),u[5]||(u[5]=a("i",{class:"mdi mdi-chevron-right text-gray-400"},null,-1))]),a("div",Le,[a("button",{class:"w-full px-3 py-2 text-sm rounded-lg text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2",onClick:u[2]||(u[2]=C=>{o.value=!1,v.$emit("request-logout")})},[...u[6]||(u[6]=[a("i",{class:"mdi mdi-logout text-lg"},null,-1),a("span",null,"Log out",-1)])])])])])):M("",!0)])]))}},Ae={key:0,class:"md:hidden border-b bg-white"},Me={class:"px-4 py-2 space-x-4"},xe={__name:"AppMobileNav",props:{show:{type:Boolean,default:!1}},setup(i){const e=B(),s=p(()=>String(e.user?.role||"").toLowerCase()),o=p(()=>s.value==="admin"),l=g([]);R(async()=>{try{!o.value&&e.user?.id&&(l.value=await b.getDepartments(e.user.id))}catch{l.value=[]}});const y=p(()=>s.value==="user"&&(!Array.isArray(l.value)||l.value.length===0));return(h,H)=>{const L=O("router-link");return i.show?(f(),V("div",Ae,[a("nav",Me,[y.value?M("",!0):(f(),q(L,{key:0,class:"text-sm text-primary hover:underline",to:{name:"dashboard"}},{default:P(()=>[...H[0]||(H[0]=[N("Dashboard",-1)])]),_:1})),A(L,{class:"text-sm text-primary hover:underline",to:{name:"profile"}},{default:P(()=>[...H[1]||(H[1]=[N("Profile",-1)])]),_:1})])])):M("",!0)}}},we={__name:"NavbarItem",props:{item:{type:Object,required:!0},collapsed:{type:Boolean,default:!1}},setup(i){const e=i,s=p(()=>["flex items-center p-2 hover:bg-tertiary rounded transition-colors",e.collapsed?"justify-center":""]),o=p(()=>e.collapsed?"text-yellow-300":"mr-2 text-yellow-300"),l=p(()=>e.collapsed?"hidden md:hidden":"");return(y,h)=>{const H=O("router-link");return i.item?.to?(f(),q(H,{key:0,to:i.item.to,"active-class":"bg-tertiary",class:Z(s.value)},{default:P(()=>[A(Y,{path:i.item.icon,size:20,cls:o.value},null,8,["path","cls"]),a("span",{class:Z(l.value)},D(i.item.label),3)]),_:1},8,["to","class"])):M("",!0)}}},z={__name:"NavbarMenuList",props:{menu:{type:Array,default:()=>[]},collapsed:{type:Boolean,default:!1}},setup(i){return(e,s)=>(f(),V("ul",null,[(f(!0),V(X,null,ee(i.menu,(o,l)=>(f(),V("li",{key:l,class:"mb-2"},[A(we,{item:o,collapsed:i.collapsed},null,8,["item","collapsed"])]))),128))]))}};var _e="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z",ke="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z",o1="M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z",i1="M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z",u1="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",c1="M3 4V1H5V4H8V6H5V9H3V6H0V4M6 10V7H9V4H16L17.8 6H21C22.1 6 23 6.9 23 8V20C23 21.1 22.1 22 21 22H5C3.9 22 3 21.1 3 20V10M13 19C17.45 19 19.69 13.62 16.54 10.46C13.39 7.31 8 9.55 8 14C8 16.76 10.24 19 13 19M9.8 14C9.8 16.85 13.25 18.28 15.26 16.26C17.28 14.25 15.85 10.8 13 10.8C11.24 10.8 9.8 12.24 9.8 14Z",d1="M22,21H2V3H4V19H6V10H10V19H12V6H16V19H18V14H22V21Z",v1="M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z",m1="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",p1="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",f1="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",g1="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",k="M4 7V21H18V23H4C2.9 23 2 22.1 2 21V7H4M12.8 15.35L9.5 12.05L10.9 10.65L12.8 12.55L17.1 8.25L18.5 9.65L12.8 15.35M20 3C21.1 3 22 3.9 22 5V17C22 18.1 21.1 19 20 19H8C6.9 19 6 18.1 6 17V5C6 3.9 6.9 3 8 3H11.18C11.6 1.84 12.7 1 14 1C15.3 1 16.4 1.84 16.82 3H20M14 3C13.45 3 13 3.45 13 4C13 4.55 13.45 5 14 5C14.55 5 15 4.55 15 4C15 3.45 14.55 3 14 3M10 7V5H8V17H20V5H18V7H10Z",V1="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",h1="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",H1="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",C1="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",y1="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",L1="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z",G="M3,5H9V11H3V5M5,7V9H7V7H5M11,7H21V9H11V7M11,15H21V17H11V15M5,20L1.5,16.5L2.91,15.09L5,17.17L9.59,12.59L11,14L5,20Z",b1="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",A1="M20,5A2,2 0 0,1 22,7V17A2,2 0 0,1 20,19H4C2.89,19 2,18.1 2,17V7C2,5.89 2.89,5 4,5H20M5,16H19L14.5,10L11,14.5L8.5,11.5L5,16Z",Se="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",M1="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",x1="M5,3V21H11V17.5H13V21H19V3H5M7,5H9V7H7V5M11,5H13V7H11V5M15,5H17V7H15V5M7,9H9V11H7V9M11,9H13V11H11V9M15,9H17V11H15V9M7,13H9V15H7V13M11,13H13V15H11V13M15,13H17V15H15V13M7,17H9V19H7V17M15,17H17V19H15V17Z",$e="M19 3V21H13V17.5H11V21H5V3H19M15 7H17V5H15V7M11 7H13V5H11V7M7 7H9V5H7V7M15 11H17V9H15V11M11 11H13V9H11V11M7 11H9V9H7V11M15 15H17V13H15V15M11 15H13V13H11V15M7 15H9V13H7V15M15 19H17V17H15V19M7 19H9V17H7V19M21 1H3V23H21V1Z",w1="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",_1="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",k1="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",S1="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z",$1="M12,8A1,1 0 0,1 13,9A1,1 0 0,1 12,10A1,1 0 0,1 11,9A1,1 0 0,1 12,8M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,6A3,3 0 0,0 9,9C9,10.31 9.83,11.42 11,11.83V18H13V16H15V14H13V11.83C14.17,11.42 15,10.31 15,9A3,3 0 0,0 12,6Z",D1="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z",Z1="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z",$="M19,5V7H15V5H19M9,5V11H5V5H9M19,13V19H15V13H19M9,17V19H5V17H9M21,3H13V9H21V3M11,3H3V13H11V3M21,11H13V21H21V11M11,15H3V21H11V15Z";const De={class:"h-full w-full bg-secondary text-white p-4"},Ze={class:"h-full flex flex-col"},Ue={class:"md:hidden flex items-center justify-between mb-2"},Be={key:0,class:"text-lg font-bold mb-4 text-yellow-300"},Ie={key:1,class:"mb-4"},Fe={key:2,class:"mb-4"},je={class:"mb-4"},ze={__name:"AppSidebar",emits:["request-logout","close"],setup(i){const e=B(),s=p(()=>String(e.user?.role||"").toLowerCase()),o=p(()=>s.value==="admin"),l=g([]),y=p(()=>{const x={supervisor:4,manager:3,evaluator:2,member:1};let m=null,S=0;for(const U of l.value||[]){const I=String(U?.membership?.role||U?.UserDepartment?.role||U?.user_department?.role||"").toLowerCase(),F=x[I]||0;F>S&&(m=I,S=F)}return m}),h=p(()=>o.value?"admin":y.value||s.value||"member"),H=p(()=>h.value==="manager"),L=p(()=>h.value==="supervisor"),v=p(()=>h.value==="evaluator"),u=p(()=>h.value==="member"),C=p(()=>s.value==="user"&&(!Array.isArray(l.value)||l.value.length===0));R(async()=>{try{!o.value&&e.user?.id&&(l.value=await b.getDepartments(e.user.id))}catch{}});const d=p(()=>u.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/compliance",label:"Compliance",icon:k}]:v.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/compliance",label:"Compliance",icon:k}]:L.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/standards",label:"Standards",icon:G},{to:"/evaluations",label:"Evaluations",icon:k},{to:"/compliance",label:"Compliance",icon:k}]:H.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/compliance",label:"Compliance",icon:k}]:[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/standards",label:"Standards",icon:G},{to:"/evaluations",label:"Evaluations",icon:k},{to:"/compliance",label:"Compliance",icon:k}]),c=p(()=>o.value||H.value||L.value?[{to:"/user-mgt",label:"User Management",icon:ke},{to:"/department-mgt",label:"Departments",icon:$e}]:[]),w=p(()=>[{to:"/profile",label:"Profile",icon:_e}]);return(x,m)=>(f(),V("aside",De,[a("nav",Ze,[a("div",Ue,[m[3]||(m[3]=a("h2",{class:"text-base font-semibold"},"Menu",-1)),a("button",{class:"p-2 rounded hover:bg-white/10",onClick:m[0]||(m[0]=S=>x.$emit("close"))},[...m[2]||(m[2]=[a("i",{class:"mdi mdi-close text-white text-xl"},null,-1)])])]),C.value?M("",!0):(f(),V("h2",Be,"Navigation")),C.value?M("",!0):(f(),V("div",Ie,[m[4]||(m[4]=a("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"General",-1)),A(z,{menu:d.value},null,8,["menu"])])),o.value&&!C.value?(f(),V("div",Fe,[m[5]||(m[5]=a("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"Admin",-1)),A(z,{menu:c.value},null,8,["menu"])])):M("",!0),a("div",je,[m[7]||(m[7]=a("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"Account",-1)),A(z,{menu:w.value},null,8,["menu"]),a("a",{href:"#",onClick:m[1]||(m[1]=te(S=>x.$emit("request-logout"),["prevent","stop"])),class:"flex items-center p-2 hover:bg-tertiary rounded mt-1"},[A(Y,{path:E(Se),size:20,cls:"mr-2 text-yellow-300"},null,8,["path"]),m[6]||(m[6]=a("span",null,"Log out",-1))])])])]))}},Pe={class:"bg-primary p-4 text-center text-white"},Re={class:"text-sm"},Ne={__name:"AppFooter",setup(i){const e=new Date().getFullYear();return(s,o)=>(f(),V("footer",Pe,[a("p",Re,D(E(e))+" © DASIG – Dashboard for Academic Systems, Information & Governance ",1),o[0]||(o[0]=a("p",{class:"text-[11px] text-yellow-300 mt-1"},"“DASIG: Energizing Academic Leadership and Governance.”",-1))]))}},Ge={id:"wrapper",class:"min-h-screen flex flex-col m-0 p-0 bg-gradient-to-b from-gray-50 to-white"},Oe={key:0,class:"fixed inset-0 bg-white/80 flex justify-center items-center z-50"},qe={class:"sticky top-0 z-20"},Ee={class:"flex flex-1"},Te={class:"flex-1 m-0 p-0 transition-all duration-200"},Ye={class:"w-full h-full m-0 p-0"},U1={__name:"LayoutAuthenticated",setup(i){const e=B(),s=J(),o=g(!1),l=g(!0),y=g(null);function h(d){const c=d?.avatar;return c?typeof c=="string"?c:typeof c=="object"&&c&&(c.image||c.url)||"":""}const H=p(()=>{const d=h(e.user);if(d)return d;const c=s.selectedUser;return c&&c.id===e.user?.id?h(c):""}),L=async()=>{try{o.value=!0,await e.logout()}finally{o.value=!1}},v=()=>L(),u=()=>{l.value=!l.value},C=p(()=>["transition-all duration-200 overflow-hidden",l.value?"w-64":"w-0"]);return R(()=>{window.toastRef=y.value;const d=e.user?.id;d&&!h(e.user)&&s.fetchById(d).catch(()=>null)}),ae(()=>s.selectedUser,d=>{const c=e.user?.id;if(!d||!c||d.id!==c)return;const w={...e.user},x=h(d);x&&(w.avatar=x);const m=typeof d?.cover=="string"?d.cover:d?.cover?.image||d?.cover?.url||"";m&&(w.cover=m),e.user=w}),(d,c)=>(f(),V("div",Ge,[o.value?(f(),V("div",Oe,[...c[1]||(c[1]=[a("div",{class:"border-8 border-gray-200 border-t-accent rounded-full w-24 h-24 animate-spin"},null,-1)])])):M("",!0),a("header",qe,[A(be,{"avatar-src":H.value,open:l.value,onToggle:u,onRequestLogout:v},null,8,["avatar-src","open"]),A(xe,{show:l.value},null,8,["show"])]),a("div",Ee,[a("div",{class:Z(C.value)},[A(ze,{onRequestLogout:v,onClose:c[0]||(c[0]=w=>l.value=!1)})],2),a("main",Te,[a("div",Ye,[T(d.$slots,"default")])])]),A(Ne),A(se,{ref_key:"toast",ref:y},null,512)]))}},Je={},Ke={class:"p-4 sm:p-6"};function We(i,e){return f(),V("section",Ke,[T(i.$slots,"default")])}const B1=le(Je,[["render",We]]);export{g1 as A,m1 as B,M1 as C,C1 as D,f1 as E,h1 as F,V1 as G,B1 as S,U1 as _,$e as a,G as b,k as c,v1 as d,d1 as e,c1 as f,w1 as g,H1 as h,ke as i,u1 as j,$1 as k,b1 as l,_e as m,A1 as n,o1 as o,k1 as p,_1 as q,y1 as r,D1 as s,S1 as t,J as u,x1 as v,p1 as w,Z1 as x,i1 as y,L1 as z};
