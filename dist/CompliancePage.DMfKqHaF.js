import{z as H,J as Me,K as Le,r as E,o as _e,A as Ue,L as Ie,M as Ne,N as ce,n as me,c as C,B as G,b as o,O as he,h as V,u as Be,s as Re,m as ve,q as we,g as F,f as n,a as r,e as D,l as ie,F as P,C as z,t as v,k as se,i as T,D as Y,v as pe,S as te}from"./index.D6qiF35X.js";import{w as Pe,_ as Oe,S as Te,c as $e,g as je,x as Fe,h as ze}from"./SectionMain.LQE99ZwY.js";import{_ as q}from"./BaseButton.CMgDjKct.js";import{_ as Ke}from"./Badge.BDCNorzU.js";import{u as He}from"./department.C1lO3iao.js";import{u as Ye}from"./evaluation.pveRqXOg.js";import{_ as qe}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./BaseIcon.B-kGt5NE.js";var Ge=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Je=function(t){return Ge.map(function(l){return l.toLowerCase()}).indexOf(t.toLowerCase())!==-1},Qe=function(t,l,s){Object.keys(l).filter(Je).forEach(function(d){var u=l[d];typeof u=="function"&&(d==="onInit"?u(t,s):s.on(d.substring(2),function(b){return u(b,s)}))})},We=function(t,l,s,d){var u=t.modelEvents?t.modelEvents:null,b=Array.isArray(u)?u.join(" "):u;H(d,function(g,k){s&&typeof g=="string"&&g!==k&&g!==s.getContent({format:t.outputFormat})&&s.setContent(g)}),s.on(b||"change input undo redo",function(){l.emit("update:modelValue",s.getContent({format:t.outputFormat}))})},Xe=function(t,l,s,d,u,b){d.setContent(b()),s.attrs["onUpdate:modelValue"]&&We(l,s,d,u),Qe(t,s.attrs,d)},fe=0,xe=function(t){var l=Date.now(),s=Math.floor(Math.random()*1e9);return fe++,t+"_"+s+fe+String(l)},Ze=function(t){return t!==null&&t.tagName.toLowerCase()==="textarea"},ge=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},et=function(t,l){return ge(t).concat(ge(l))},tt=function(t){return t==null},ye=function(t){var l;return typeof((l=t.options)===null||l===void 0?void 0:l.set)=="function"&&t.options.isRegistered("disabled")},be=function(){return{listeners:[],scriptId:xe("tiny-script"),scriptLoaded:!1}},nt=function(){var t=be(),l=function(u,b,g,k){var p=b.createElement("script");p.referrerPolicy="origin",p.type="application/javascript",p.id=u,p.src=g;var f=function(){p.removeEventListener("load",f),k()};p.addEventListener("load",f),b.head&&b.head.appendChild(p)},s=function(u,b,g){t.scriptLoaded?g():(t.listeners.push(g),u.getElementById(t.scriptId)||l(t.scriptId,u,b,function(){t.listeners.forEach(function(k){return k()}),t.scriptLoaded=!0}))},d=function(){t=be()};return{load:s,reinitialize:d}},at=nt(),it=function(){return typeof window<"u"?window:global},K=function(){var t=it();return t&&t.tinymce?t.tinymce:null},st={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return t==="html"||t==="text"}}},B=function(){return B=Object.assign||function(t){for(var l,s=1,d=arguments.length;s<d;s++){l=arguments[s];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(t[u]=l[u])}return t},B.apply(this,arguments)},lt=function(t,l,s,d){return t(d||"div",{id:l,ref:s})},ot=function(t,l,s){return t("textarea",{id:l,visibility:"hidden",ref:s})},le={selector:void 0,target:void 0},oe=function(t,l){var s;typeof((s=t.mode)===null||s===void 0?void 0:s.set)=="function"?t.mode.set(l):t.setMode(l)},rt=Me({props:st,setup:function(t,l){var s=t.init?B(B({},t.init),le):B({},le),d=Le(t),u=d.disabled,b=d.readonly,g=d.modelValue,k=d.tagName,p=E(null),f=null,Z=t.id||xe("tiny-vue"),_=t.init&&t.init.inline||t.inline,M=!!l.attrs["onUpdate:modelValue"],R=!0,$=t.initialValue?t.initialValue:"",w="",J=function(y){return M?function(){return g?.value?g.value:""}:function(){return y?$:w}},I=function(){var y=J(R),h=B(B({},s),{disabled:t.disabled,readonly:t.readonly,target:p.value,plugins:et(s.plugins,t.plugins),toolbar:t.toolbar||s.toolbar,inline:_,license_key:t.licenseKey,setup:function(N){f=N,!ye(f)&&t.disabled===!0&&oe(f,"readonly"),N.on("init",function(Q){return Xe(Q,t,l,N,g,y)}),typeof s.setup=="function"&&s.setup(N)}});Ze(p.value)&&(p.value.style.visibility=""),K().init(h),R=!1};H(b,function(y){f!==null&&oe(f,y?"readonly":"design")}),H(u,function(y){f!==null&&(ye(f)?f.options.set("disabled",y):oe(f,y?"readonly":"design"))}),H(k,function(y){var h;f&&(M||(w=f.getContent()),(h=K())===null||h===void 0||h.remove(f),me(function(){return I()}))}),_e(function(){if(K()!==null)I();else if(p.value&&p.value.ownerDocument){var y=t.cloudChannel?t.cloudChannel:"8",h=t.apiKey?t.apiKey:"no-api-key",N=tt(t.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(h,"/tinymce/").concat(y,"/tinymce.min.js"):t.tinymceScriptSrc;at.load(p.value.ownerDocument,N,I)}}),Ue(function(){K()!==null&&K().remove(f)}),_||(Ie(function(){R||I()}),Ne(function(){var y;f&&(M||(w=f.getContent()),(y=K())===null||y===void 0||y.remove(f))}));var j=function(y){var h;f&&(w=f.getContent(),(h=K())===null||h===void 0||h.remove(f),s=B(B(B({},s),y),le),me(function(){return I()}))};return l.expose({rerender:j,getEditor:function(){return f}}),function(){return _?lt(ce,Z,p,t.tagName):ot(ce,Z,p)}}});const re={__name:"TinyEditor",props:{id:{type:String,default:void 0},modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:[Number,String],default:180},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:l}){const s=t,d=l,u=C({get:()=>s.modelValue,set:g=>d("update:modelValue",g)}),b={menubar:!1,plugins:"lists link fullscreen table code autoresize",toolbar:"undo redo | bold italic underline | bullist numlist | link | alignleft aligncenter alignright | table | code | fullscreen",branding:!1,statusbar:!1,autoresize_bottom_margin:16,placeholder:s.placeholder,license_key:"gpl",content_style:"body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; font-size: 14px; }"};return(g,k)=>(o(),G(V(rt),{modelValue:u.value,"onUpdate:modelValue":k[0]||(k[0]=p=>u.value=p),init:b,disabled:t.disabled,"tag-name":"div","tinymce-script-src":"/tinymce/tinymce.min.js",licenseKey:"gpl","api-key":"no-api-key",id:t.id,inline:!1,"cloud-channel":"6","output-format":"html",style:he({minHeight:typeof t.height=="number"?t.height+"px":String(t.height)})},null,8,["modelValue","disabled","id","style"]))}},dt={class:"flex items-center justify-between mb-3"},ut={class:"text-lg font-semibold inline-flex items-center gap-2"},ct={class:"w-5 h-5 opacity-80",viewBox:"0 0 24 24"},mt=["d"],vt={key:0,class:"rounded-2xl border bg-white shadow-sm mb-4"},pt={class:"p-4"},ft={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3"},gt={class:"flex items-start justify-between gap-2"},yt={class:"text-sm font-semibold text-gray-900"},bt={class:"text-[11px] text-gray-500"},_t={key:0},ht={class:"mt-3 flex items-center justify-between"},xt={class:"w-full h-1.5 bg-gray-100 rounded"},St={class:"ml-2 text-[11px] text-gray-600"},kt={class:"mt-3 text-right"},Ct={key:0,class:"col-span-full p-4 text-center text-gray-500"},At={key:1,class:"mb-3"},Vt={class:"flex items-center justify-between mb-2"},Dt={class:"text-sm text-gray-700"},Et={class:"font-medium"},Mt={class:"ml-2 text-gray-500"},Lt={key:0},Ut={key:2,class:"rounded-2xl border bg-white shadow-sm mb-4 p-4"},It={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},Nt=["value"],Bt=["value"],Rt=["disabled"],wt=["value"],Pt={key:0,class:"text-[11px] text-gray-500 mt-1"},Ot=["value"],Tt=["value"],$t={key:3,class:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4"},jt={class:"rounded-2xl shadow-sm p-4 text-white bg-emerald-600"},Ft={class:"mt-1 text-2xl font-semibold"},zt={class:"rounded-2xl shadow-sm p-4 text-white bg-rose-600"},Kt={class:"mt-1 text-2xl font-semibold"},Ht={class:"rounded-2xl shadow-sm p-4 text-white bg-blue-600"},Yt={class:"mt-1 text-2xl font-semibold"},qt={key:4,class:"rounded-2xl border bg-white shadow-sm overflow-x-auto max-h-[70vh] overflow-y-auto"},Gt={class:"w-full text-sm"},Jt={class:"p-2 align-top min-w-[260px]"},Qt={class:"text-gray-900 text-sm font-medium"},Wt={class:"mt-1 text-xs text-gray-500"},Xt={class:"mr-2"},Zt={class:"p-2 align-top min-w-[240px]"},en=["innerHTML"],tn={class:"p-2 align-top min-w-[220px]"},nn=["href"],an={key:1,class:"text-gray-500"},sn=["onUpdate:modelValue"],ln={class:"p-2 align-top min-w-[220px]"},on=["innerHTML"],rn={class:"p-2 align-top min-w-[220px]"},dn=["innerHTML"],un={class:"p-2 align-top min-w-[180px]"},cn={key:0,class:"space-y-1"},mn=["onUpdate:modelValue"],vn=["onUpdate:modelValue"],pn=["onUpdate:modelValue"],fn={class:"mb-1"},gn={class:"text-[11px] text-gray-500"},yn={class:"text-[11px] text-gray-500"},bn={class:"p-2 align-top text-right whitespace-nowrap"},_n={class:"flex justify-end gap-2"},hn={key:0},xn={__name:"CompliancePage",setup(t){const l=He(),s=Ye(),d=Be(),u=Re(),b=we(),g=C(()=>String(d.user?.role||"").toLowerCase()),k=C(()=>g.value==="admin"),p=C(()=>g.value==="user"),f=(()=>{const i=new Date().getFullYear();return Array.from({length:6},(a,e)=>`${i+e}-${i+e+1}`)})(),Z=["1st Semester","2nd Semester","Summer"],_=E(""),M=E(""),R=E(""),$=E(""),w=E([]),J=E(!1),I=E("");H(_,async i=>{if(I.value="",!(!i||!d.user?.id))try{const a=await l.fetchMembers(Number(i),!0),e=(Array.isArray(a)?a:[]).find(c=>Number(c.id)===Number(d.user.id));I.value=String(e?.membership?.role||"").toLowerCase()}catch{I.value=""}});const j=C(()=>k.value?"admin":I.value==="supervisor"?"supervisor":"member"),y=C(()=>j.value==="member"||j.value==="admin"),h=C(()=>["supervisor","admin"].includes(j.value)),N=C(()=>["supervisor","admin"].includes(j.value)),Q=C(()=>["supervisor","admin"].includes(j.value)),Se=async()=>{if(w.value=[],!!_.value){J.value=!0;try{const i=await l.fetchMembers(Number(_.value),!0);w.value=Array.isArray(i)?i:[]}catch{w.value=[]}finally{J.value=!1}}},ke=E({page:1,limit:50}),de=async()=>{const i={page:1,limit:200};_.value&&(i.department_id=Number(_.value)),M.value&&(i.assigned_to_id=Number(M.value)),R.value&&(i.academic_year=R.value),$.value&&(i.semester=$.value),ke.value=i,await s.fetchAll(i,!0)},W=E([]),A=C(()=>{const i=new Map,a=Array.isArray(s.list?.data)?s.list.data:[],e=d.user?.id;(e?a.filter(x=>Number(x.assigned_to_id)===Number(e)):[]).forEach(x=>{const L=x.department_id,U=i.get(L)||{total:0,complied:0,latestAy:"",latestSem:"",latestCreatedAt:0};U.total+=1,x.status==="complied"&&(U.complied+=1);const ue=x.created_at?new Date(x.created_at).getTime():0;ue>=(U.latestCreatedAt||0)&&(U.latestCreatedAt=ue,U.latestAy=x.academic_year||"",U.latestSem=x.semester||""),i.set(L,U)});const O={};for(const x of W.value){const L=i.get(x.id)||{total:0,complied:0,latestAy:"",latestSem:""},U=L.total?Math.round(L.complied/L.total*100):0;O[x.id]={...L,progress:U}}return O}),Ce=C(()=>{const i=Number(u.params?.departmentId||_.value);return i&&(l.departments?.data||[]).find(e=>Number(e.id)===i)||null}),ne=C(()=>{const i=Number(u.params?.departmentId||_.value),a=A.value[i]||{};return{ay:a.latestAy||"",sem:a.latestSem||""}});_e(async()=>{if(await l.fetchAll({page:1,limit:200},!0),!k.value&&d.user?.id)try{W.value=await Pe.getDepartments(d.user.id),p.value&&(M.value=String(d.user.id),await s.fetchAll({page:1,limit:100,assigned_to_id:d.user.id},!0))}catch{}u.params?.departmentId&&(_.value=String(u.params.departmentId)),await de()}),H([_,M,R,$],async()=>{await de()}),H(_,async()=>{M.value="",await Se()});const X=C(()=>Array.isArray(s.list?.data)?s.list.data:[]),ae=C(()=>{const i=X.value.length,a=X.value.filter(O=>O.status==="complied").length,e=X.value.filter(O=>O.status==="in_progress").length,c=i?Math.round(a/i*100):0;return{total:i,complied:a,notcomplied:e,progress:c}}),Ae=i=>{const a=String(i||"").toLowerCase();return a==="governance"?"bg-indigo-50 text-indigo-700 ring-indigo-200":a==="records"?"bg-amber-50 text-amber-700 ring-amber-200":a==="processes"?"bg-sky-50 text-sky-700 ring-sky-200":a==="quality"?"bg-emerald-50 text-emerald-700 ring-emerald-200":a==="resources"?"bg-purple-50 text-purple-700 ring-purple-200":"bg-gray-50 text-gray-700 ring-gray-200"},S=E({}),ee=E({}),m=i=>{const a=ee.value[i.id];if(a)return a;const e={self_assessment:i.self_assessment||"",evidence_url:i.evidence_url||"",findings:i.findings||"",recommendations:i.recommendations||"",status:i.status||"in_progress",priority:i.priority||"medium",deadline:i.deadline?new Date(i.deadline).toISOString().slice(0,10):""};return ee.value[i.id]=e,e},Ve=i=>{i.isLocked&&!Q.value||(S.value[i.id]=!0,m(i))},De=async i=>{if(!(await te.fire({title:"Reset fields?",text:p.value?"This will clear self-evaluation and evidence only. You still need to save to persist.":"This will clear self-evaluation, evidence, findings, comments and set status to in_progress. You still need to save to persist.",icon:"warning",showCancelButton:!0,confirmButtonText:"Reset"})).isConfirmed)return;const e=m(i);y.value&&(e.self_assessment="",e.evidence_url=""),h.value&&(e.findings="",e.recommendations=""),N.value&&(e.status="in_progress",e.priority="medium",e.deadline=""),S.value[i.id]=!0,await te.fire("Cleared","Row fields have been cleared. Click Save to persist.","success")},Ee=async i=>{const a=ee.value[i.id];if(!a||!(await te.fire({title:"Save changes?",text:"Persist the updated evaluation fields.",icon:"question",showCancelButton:!0,confirmButtonText:"Save"})).isConfirmed)return;const c={};y.value&&(c.self_assessment=(a.self_assessment||"").trim()||null,c.evidence_url=(a.evidence_url||"").trim()||null),h.value&&(c.findings=(a.findings||"").trim()||null,c.recommendations=(a.recommendations||"").trim()||null),N.value&&(c.status=a.status||"in_progress",c.priority=a.priority||"medium",c.deadline=a.deadline?new Date(a.deadline):null);const O=await s.updateById(i.id,c);try{const x=s.list?.data;if(Array.isArray(x)){const L=x.findIndex(U=>Number(U.id)===Number(i.id));L!==-1&&(x[L]={...x[L],...O})}}catch{}S.value[i.id]=!1,delete ee.value[i.id],await te.fire("Saved","Evaluation updated successfully.","success")};return(i,a)=>(o(),G(Oe,null,{default:ve(()=>[F(Te,null,{default:ve(()=>[n("div",dt,[n("h1",ut,[(o(),r("svg",ct,[n("path",{d:V($e)},null,8,mt)])),a[5]||(a[5]=ie(" Compliance ",-1))])]),p.value&&!V(u).params.departmentId?(o(),r("div",vt,[a[6]||(a[6]=n("div",{class:"px-4 py-3 border-b flex items-center justify-between"},[n("h3",{class:"text-sm font-semibold text-gray-800"},"My Departments")],-1)),n("div",pt,[n("div",ft,[(o(!0),r(P,null,z(W.value,e=>(o(),r("div",{key:e.id,class:"rounded-xl border p-4 hover:shadow-sm transition"},[n("div",gt,[n("div",null,[n("div",yt,v(e.name),1),n("div",bt,[ie(v(A.value[e.id]?.latestAy||"-")+" ",1),A.value[e.id]?.latestSem?(o(),r("span",_t,"• "+v(A.value[e.id]?.latestSem),1)):D("",!0)])]),n("div",null,[A.value[e.id]?(o(),r("span",{key:0,class:se(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1",A.value[e.id].progress>=80?"bg-emerald-50 text-emerald-700 ring-emerald-200":A.value[e.id].progress>0?"bg-amber-50 text-amber-700 ring-amber-200":"bg-gray-50 text-gray-700 ring-gray-200"])},v(A.value[e.id].complied)+"/"+v(A.value[e.id].total),3)):D("",!0)])]),n("div",ht,[n("div",xt,[n("div",{class:se(["h-1.5 rounded",A.value[e.id]?.progress>=80?"bg-emerald-500":A.value[e.id]?.progress>0?"bg-amber-500":"bg-gray-300"]),style:he({width:(A.value[e.id]?.progress||0)+"%"})},null,6)]),n("div",St,v(A.value[e.id]?.progress||0)+"%",1)]),n("div",kt,[F(q,{small:"",color:"primary",label:"View",onClick:()=>V(b).push({name:"compliance",params:{departmentId:e.id}})},null,8,["onClick"])])]))),128)),W.value.length?D("",!0):(o(),r("div",Ct,"No department assignments."))])])])):D("",!0),p.value&&V(u).params.departmentId?(o(),r("div",At,[n("div",Vt,[F(q,{color:"secondary",outline:"",small:"",label:"Back",onClick:a[0]||(a[0]=()=>V(b).push({name:"compliance"}))}),n("div",Dt,[n("span",Et,v(Ce.value?.name||"Department"),1),n("span",Mt,[ie(v(ne.value.ay||"-"),1),ne.value.sem?(o(),r("span",Lt," • "+v(ne.value.sem),1)):D("",!0)])])])])):D("",!0),p.value?D("",!0):(o(),r("div",Ut,[n("div",It,[n("div",null,[a[8]||(a[8]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Department",-1)),T(n("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>_.value=e),class:"w-full border p-2 rounded"},[a[7]||(a[7]=n("option",{value:""},"All",-1)),k.value?(o(!0),r(P,{key:0},z(V(l).departments.data,e=>(o(),r("option",{key:e.id,value:e.id},v(e.name),9,Nt))),128)):(o(!0),r(P,{key:1},z(W.value,e=>(o(),r("option",{key:e.id,value:e.id},v(e.name),9,Bt))),128))],512),[[Y,_.value]])]),n("div",null,[a[10]||(a[10]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Name of Faculty (Assignee)",-1)),T(n("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>M.value=e),class:"w-full border p-2 rounded",disabled:!_.value},[a[9]||(a[9]=n("option",{value:""},"All",-1)),(o(!0),r(P,null,z(w.value,e=>(o(),r("option",{key:e.id,value:e.id},"@"+v(e.username)+" — "+v(e.first_name||"")+" "+v(e.last_name||""),9,wt))),128))],8,Rt),[[Y,M.value]]),J.value?(o(),r("div",Pt,"Loading members…")):D("",!0)]),n("div",null,[a[12]||(a[12]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"School Year",-1)),T(n("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>R.value=e),class:"w-full border p-2 rounded"},[a[11]||(a[11]=n("option",{value:""},"All",-1)),(o(!0),r(P,null,z(V(f),e=>(o(),r("option",{key:e,value:e},v(e),9,Ot))),128))],512),[[Y,R.value]])]),n("div",null,[a[14]||(a[14]=n("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Semester",-1)),T(n("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>$.value=e),class:"w-full border p-2 rounded"},[a[13]||(a[13]=n("option",{value:""},"All",-1)),(o(),r(P,null,z(Z,e=>n("option",{key:e,value:e},v(e),9,Tt)),64))],512),[[Y,$.value]])])])])),p.value&&!V(u).params.departmentId?D("",!0):(o(),r("div",$t,[n("div",jt,[a[15]||(a[15]=n("div",{class:"text-sm opacity-90"},"Complied",-1)),n("div",Ft,v(ae.value.complied),1)]),n("div",zt,[a[16]||(a[16]=n("div",{class:"text-sm opacity-90"},"Not Complied",-1)),n("div",Kt,v(ae.value.notcomplied),1)]),n("div",Ht,[a[17]||(a[17]=n("div",{class:"text-sm opacity-90"},"Progress (%)",-1)),n("div",Yt,v(ae.value.progress)+"%",1)])])),!p.value||V(u).params.departmentId?(o(),r("div",qt,[n("table",Gt,[a[21]||(a[21]=n("thead",null,[n("tr",{class:"bg-gray-50 text-gray-700"},[n("th",{class:"p-2 text-left align-top"},"Standards"),n("th",{class:"p-2 text-left align-top"},"Self-Evaluation"),n("th",{class:"p-2 text-left align-top"},"Evidence"),n("th",{class:"p-2 text-left align-top"},"Findings"),n("th",{class:"p-2 text-left align-top"},"Comments / Recommendations"),n("th",{class:"p-2 text-left align-top"},"Status"),n("th",{class:"p-2 text-right align-top"},"Actions")])],-1)),n("tbody",null,[(o(!0),r(P,null,z(X.value,e=>(o(),r("tr",{key:`${e.id}-${S.value[e.id]?"edit":"view"}`,class:"border-t"},[n("td",Jt,[n("div",{class:se(["inline-flex items-center rounded-full px-2 py-[2px] text-[11px] ring-1 mb-1",Ae(e.standard?.area)])},v(e.standard?.area||"Area"),3),n("div",Qt,"#"+v(e.standard_id)+" — "+v(e.standard?.description||"(no description)"),1),n("div",Wt,[n("span",Xt,"P: "+v(e.priority||"medium"),1),n("span",null,"Due: "+v(e.deadline?new Date(e.deadline).toLocaleDateString():"-"),1)])]),n("td",Zt,[S.value[e.id]?(o(),G(re,{key:`sa-${e.id}-${S.value[e.id]}`,id:`sa-${e.id}`,modelValue:m(e).self_assessment,"onUpdate:modelValue":c=>m(e).self_assessment=c,height:180,placeholder:"Self-evaluation / actual situation"},null,8,["id","modelValue","onUpdate:modelValue"])):(o(),r("div",{key:0,class:"prose prose-sm max-w-none",innerHTML:m(e).self_assessment||"-"},null,8,en))]),n("td",tn,[!S.value[e.id]||!y.value?(o(),r(P,{key:0},[m(e).evidence_url?(o(),r("a",{key:0,href:m(e).evidence_url,target:"_blank",class:"text-blue-600 hover:underline break-all"},v(m(e).evidence_url),9,nn)):(o(),r("span",an,"-"))],64)):T((o(),r("input",{key:1,"onUpdate:modelValue":c=>m(e).evidence_url=c,type:"url",class:"w-full border rounded p-2",placeholder:"https://evidence-link"},null,8,sn)),[[pe,m(e).evidence_url]])]),n("td",ln,[!S.value[e.id]||!h.value?(o(),r("div",{key:0,class:"prose prose-sm max-w-none",innerHTML:m(e).findings||"-"},null,8,on)):(o(),G(re,{key:`fd-${e.id}-${S.value[e.id]}`,id:`fd-${e.id}`,modelValue:m(e).findings,"onUpdate:modelValue":c=>m(e).findings=c,height:160,placeholder:"Findings"},null,8,["id","modelValue","onUpdate:modelValue"]))]),n("td",rn,[!S.value[e.id]||!h.value?(o(),r("div",{key:0,class:"prose prose-sm max-w-none",innerHTML:m(e).recommendations||"-"},null,8,dn)):(o(),G(re,{key:`rc-${e.id}-${S.value[e.id]}`,id:`rc-${e.id}`,modelValue:m(e).recommendations,"onUpdate:modelValue":c=>m(e).recommendations=c,height:160,placeholder:"Comments / recommendations"},null,8,["id","modelValue","onUpdate:modelValue"]))]),n("td",un,[S.value[e.id]&&N.value?(o(),r("div",cn,[T(n("select",{"onUpdate:modelValue":c=>m(e).status=c,class:"w-full border rounded p-1 text-xs"},[...a[18]||(a[18]=[n("option",{value:"in_progress"},"in_progress",-1),n("option",{value:"complied"},"complied",-1),n("option",{value:"not_complied"},"not_complied",-1)])],8,mn),[[Y,m(e).status]]),T(n("select",{"onUpdate:modelValue":c=>m(e).priority=c,class:"w-full border rounded p-1 text-xs"},[...a[19]||(a[19]=[n("option",{value:"low"},"low",-1),n("option",{value:"medium"},"medium",-1),n("option",{value:"high"},"high",-1),n("option",{value:"urgent"},"urgent",-1)])],8,vn),[[Y,m(e).priority]]),T(n("input",{type:"date","onUpdate:modelValue":c=>m(e).deadline=c,class:"w-full border rounded p-1 text-xs"},null,8,pn),[[pe,m(e).deadline]])])):(o(),r(P,{key:1},[n("div",fn,[F(Ke,{text:m(e).status,tone:m(e).status==="complied"?"emerald":m(e).status==="in_progress"?"indigo":"gray"},null,8,["text","tone"])]),n("div",gn,"P: "+v(m(e).priority||"medium"),1),n("div",yn,"Due: "+v(m(e).deadline?new Date(m(e).deadline).toLocaleDateString():"-"),1)],64))]),n("td",bn,[n("div",_n,[F(q,{icon:V(je),small:"",color:"secondary",outline:"",disabled:S.value[e.id]||e.isLocked&&!Q.value,label:"Edit",onClick:c=>Ve(e)},null,8,["icon","disabled","onClick"]),F(q,{icon:V(Fe),small:"",color:"info",outline:"",disabled:!S.value[e.id],label:"Reset",onClick:c=>De(e)},null,8,["icon","disabled","onClick"]),F(q,{icon:V(ze),small:"",color:"primary",disabled:!S.value[e.id],label:"Save",onClick:c=>Ee(e)},null,8,["icon","disabled","onClick"]),Q.value?(o(),G(q,{key:0,small:"",color:e.isLocked?"secondary":"warning",label:e.isLocked?"Unlock":"Lock",onClick:c=>i.toggleLock(e)},null,8,["color","label","onClick"])):D("",!0)])])]))),128)),X.value.length?D("",!0):(o(),r("tr",hn,[...a[20]||(a[20]=[n("td",{colspan:"9",class:"p-4 text-center text-gray-500"},"No evaluations found for the selected filters.",-1)])]))])])])):D("",!0)]),_:1})]),_:1}))}},Ln=qe(xn,[["__scopeId","data-v-2c633ccb"]]);export{Ln as default};
