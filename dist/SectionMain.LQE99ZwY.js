import{P as L,I as J,r as p,q as Q,u as z,c as f,a as V,b as g,f as r,d as X,k as B,e as S,t as Z,p as E,g as H,m as R,l as G,B as ee,F as te,C as ae,o as T,w as se,h as O,z as re,U as Y}from"./index.D6qiF35X.js";import{_ as K,T as le}from"./BaseIcon.B-kGt5NE.js";import{_ as ne}from"./_plugin-vue_export-helper.DlAUqK2U.js";function $(t){if(!t||typeof t!="object")return t;const e={...t};return e.avatar=t.avatar??null,e.cover=t.cover??null,e}function N(t,e){return typeof e=="string"?L.post(t,{file:e}):new Promise((a,l)=>{const i=new FileReader;i.onload=()=>{L.post(t,{file:i.result}).then(a).catch(l)},i.onerror=l,i.readAsDataURL(e)})}const b={async create(t){const{data:e}=await L.post("/users",t);return $(e)},async getById(t){const{data:e}=await L.get(`/users/${t}`);return $(e)},async updateById(t,e){const{data:a}=await L.put(`/users/${t}`,e);return $(a)},async delete(t){const{data:e}=await L.delete(`/users/${t}`);return e},async list(t){const{data:e}=await L.get("/users",{params:t});return{...e,data:Array.isArray(e?.data)?e.data.map($):[]}},async getDepartments(t){const{data:e}=await L.get(`/users/${t}/departments`);return Array.isArray(e)?e:[]},async uploadAvatar(t,e){const{data:a}=await N(`/users/${t}/avatar`,e);return $(a)},async uploadCover(t,e){const{data:a}=await N(`/users/${t}/cover`,e);return $(a)},async changePassword({old_password:t,new_password:e}){const{data:a}=await L.post("/auth/change-password",{old_password:t,new_password:e});return a},async getClubs(t){return[]},async getClubInfo(t,e){return null},async getDepartments(t){const{data:e}=await L.get(`/users/${t}/departments`);return Array.isArray(e?.departments)?e.departments:[]},async getDepartmentInfo(t,e){const{data:a}=await L.get(`/users/${t}/departments/${e}`);return a||null}},W=J("user",()=>{const t=p({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),e=p(!1),a=p(null),l=p(!1),i=p(null),C=p({}),h=p([]),A=p({}),w=p(null),v=p({}),u=p({}),y=p([]),m=p(null),c=n=>{if(!n?.id)return;const o=t.value.data.findIndex(s=>s.id===n.id);o!==-1&&(t.value.data[o]=n)};return{users:t,selectedUser:i,selectedUserClubs:h,clubsByUser:C,selectedUserClub:w,selectedUserDepartments:y,selectedUserDepartment:m,departmentsByUser:v,departmentInfoCache:u,isLoading:e,error:a,isLoaded:l,fetchAll:async(n={},o=!1)=>{if(a.value=null,!(!o&&l.value))try{e.value=!0;const s=await b.list(n);Object.assign(t.value,{total:s.total||0,totalPages:s.totalPages||1,currentPage:n.page||1,pageSize:n.limit||10,data:s.data||[]}),l.value=!0}catch(s){a.value=s?.response?.data?.message||s?.message||"Failed to fetch users"}finally{e.value=!1}},fetchById:async n=>{a.value=null;try{e.value=!0;const o=await b.getById(n);i.value=o,c(o)}catch(o){a.value=o?.response?.data?.message||o?.message||"Failed to fetch user"}finally{e.value=!1}},create:async n=>{a.value=null;try{e.value=!0;const o=await b.create(n);t.value.data.push(o),t.value.total+=1}catch(o){a.value=o?.response?.data?.message||o?.message||"Failed to create user"}finally{e.value=!1}},updateById:async(n,o)=>{a.value=null;try{e.value=!0;const s=await b.updateById(n,o);return c(s),i.value?.id===n&&(i.value=s),s}catch(s){throw a.value=s?.response?.data?.message||s?.message||"Failed to update user",s}finally{e.value=!1}},deleteById:async n=>{a.value=null;try{e.value=!0,await b.delete(n),t.value.data=t.value.data.filter(o=>o.id!==n),t.value.total=Math.max(0,(t.value.total||1)-1),i.value?.id===n&&(i.value=null)}catch(o){a.value=o?.response?.data?.message||o?.message||"Failed to delete user"}finally{e.value=!1}},uploadAvatar:async(n,o)=>{a.value=null;try{e.value=!0;const s=await b.uploadAvatar(n,o);return c(s),i.value?.id===n&&(i.value=s),s}catch(s){throw a.value=s?.response?.data?.message||s?.message||"Failed to upload avatar",s}finally{e.value=!1}},uploadCover:async(n,o)=>{a.value=null;try{e.value=!0;const s=await b.uploadCover(n,o);return c(s),i.value?.id===n&&(i.value=s),s}catch(s){throw a.value=s?.response?.data?.message||s?.message||"Failed to upload cover",s}finally{e.value=!1}},changePassword:async({old_password:n,new_password:o})=>{a.value=null;try{return e.value=!0,await b.changePassword({old_password:n,new_password:o})}catch(s){throw a.value=s?.response?.data?.message||s?.message||"Failed to change password",s}finally{e.value=!1}},fetchUserClubs:async()=>[],fetchUserClub:async()=>null,fetchUserDepartments:async(n,o=!1)=>{a.value=null;try{if(e.value=!0,!o&&Array.isArray(v.value[n]))return y.value=v.value[n],y.value;const s=await b.getDepartments(n);return v.value[n]=s,y.value=s,s}catch(s){throw a.value=s?.response?.data?.message||s?.message||"Failed to fetch user departments",s}finally{e.value=!1}},fetchUserDepartment:async(n,o,s=!1)=>{a.value=null;const P=`${n}:${o}`;try{if(e.value=!0,!s&&u.value[P])return m.value=u.value[P],m.value;const _=await b.getDepartmentInfo(n,o);return u.value[P]=_,m.value=_,_}catch(_){throw a.value=_?.response?.data?.message||_?.message||"Failed to fetch department info",_}finally{e.value=!1}},resetStore:()=>{t.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},i.value=null,h.value=[],A.value={},w.value=null,l.value=!1,e.value=!1,a.value=null}}}),oe=""+new URL("images/logo-banner.png",import.meta.url).href,ie=""+new URL("images/logo-sm.png",import.meta.url).href,ue={class:"flex justify-between items-center px-4 sm:px-6 py-3 bg-primary text-white"},ce={class:"flex items-center gap-3"},de={class:"relative flex items-center gap-2"},me=["aria-expanded"],ve={class:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 grid place-items-center ring-1 ring-gray-200"},pe=["src"],fe={key:1,class:"h-full w-full grid place-items-center text-gray-700 text-xs font-semibold"},ge={class:"font-medium truncate max-w-[12rem] text-left hidden sm:block"},Ve={key:1,class:"absolute right-0 top-full mt-2 z-40 w-64 sm:w-80"},he={class:"relative bg-white text-gray-900 rounded-xl shadow-2xl ring-1 ring-black/5 overflow-hidden"},He={class:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center ring-1 ring-gray-200"},ye=["src"],Ce={key:1,class:"mdi mdi-account text-gray-400 text-xl"},be={class:"min-w-0 flex-1 text-left"},Le={class:"text-xs text-gray-500 truncate"},Ae={class:"px-4 py-2 bg-gray-50 border-t border-gray-200"},Me={__name:"AppHeader",props:{avatarSrc:{type:String,default:""},open:{type:Boolean,default:!0}},emits:["toggle","request-logout"],setup(t){const e=Q(),a=z();W();const l=p(!1),i=()=>{l.value=!l.value},C=f(()=>{const v=a.user?.first_name??"",u=a.user?.last_name??"";return[v,u].filter(Boolean).join(" ")||a.user?.email||""}),h=f(()=>{const v=a.user?.avatar;return v?typeof v=="string"?v:typeof v=="object"&&(v.image||v.url)||"":""}),A=v=>String(v||"").split(" ").map(u=>u[0]).join("").slice(0,2).toUpperCase(),w=()=>{l.value=!1,e.push({name:"profile"})};return(v,u)=>(g(),V("div",ue,[r("div",ce,[r("button",{class:"focus:outline-none p-2 rounded hover:bg-white/10",onClick:u[0]||(u[0]=y=>v.$emit("toggle")),"aria-label":"Toggle sidebar"},[r("i",{class:B(["mdi",t.open?"mdi-menu-open":"mdi-menu","text-white","text-2xl"])},null,2)]),u[3]||(u[3]=X('<div class="logo-box flex items-center gap-3"><a href="javascript:void(0)" class="flex items-center"><img src="'+oe+'" alt="DASIG" class="hidden md:block" width="158" height="45"><img src="'+ie+'" alt="DASIG" class="block md:hidden" width="36" height="36"></a><span class="hidden lg:block text-sm leading-4 max-w-[18rem]"><span class="font-semibold">DASIG</span><span class="opacity-90"> – Dashboard for Academic Systems, Information &amp; Governance</span></span></div>',1))]),r("nav",de,[r("button",{class:"flex items-center gap-2 pl-1 pr-2 py-1 rounded-full bg-transparent text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/30",onClick:i,"aria-expanded":l.value?"true":"false"},[r("div",ve,[h.value?(g(),V("img",{key:0,src:h.value,alt:"Avatar",class:"h-full w-full object-cover"},null,8,pe)):(g(),V("div",fe,Z(A(C.value)),1))]),r("span",ge,Z(C.value),1),r("i",{class:B(["mdi",l.value?"mdi-chevron-up":"mdi-chevron-down","text-lg text-white/90"])},null,2)],8,me),l.value?(g(),V("div",{key:0,class:"fixed inset-0 z-30",onClick:u[1]||(u[1]=y=>l.value=!1)})):S("",!0),l.value?(g(),V("div",Ve,[u[8]||(u[8]=r("div",{class:"absolute right-4 sm:right-6 -top-2 h-3 w-3 rotate-45 bg-white ring-1 ring-black/5"},null,-1)),r("div",he,[u[7]||(u[7]=r("div",{class:"px-4 py-3 border-b bg-gray-50"},[r("div",{class:"text-[11px] uppercase tracking-wide text-gray-500"},"Account")],-1)),r("button",{class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50",onClick:w},[r("div",He,[t.avatarSrc?(g(),V("img",{key:0,src:t.avatarSrc,alt:"avatar",class:"h-full w-full object-cover"},null,8,ye)):(g(),V("i",Ce))]),r("div",be,[u[4]||(u[4]=r("div",{class:"text-sm font-medium truncate"},"See your profile",-1)),r("div",Le,Z(C.value),1)]),u[5]||(u[5]=r("i",{class:"mdi mdi-chevron-right text-gray-400"},null,-1))]),r("div",Ae,[r("button",{class:"w-full px-3 py-2 text-sm rounded-lg text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2",onClick:u[2]||(u[2]=y=>{l.value=!1,v.$emit("request-logout")})},[...u[6]||(u[6]=[r("i",{class:"mdi mdi-logout text-lg"},null,-1),r("span",null,"Log out",-1)])])])])])):S("",!0)])]))}},we={key:0,class:"md:hidden border-b bg-white"},xe={class:"px-4 py-2 space-x-4"},_e={__name:"AppMobileNav",props:{show:{type:Boolean,default:!1}},setup(t){return(e,a)=>{const l=E("router-link");return t.show?(g(),V("div",we,[r("nav",xe,[H(l,{class:"text-sm text-primary hover:underline",to:{name:"dashboard"}},{default:R(()=>[...a[0]||(a[0]=[G("Dashboard",-1)])]),_:1}),H(l,{class:"text-sm text-primary hover:underline",to:{name:"profile"}},{default:R(()=>[...a[1]||(a[1]=[G("Profile",-1)])]),_:1})])])):S("",!0)}}},ke={__name:"NavbarItem",props:{item:{type:Object,required:!0},collapsed:{type:Boolean,default:!1}},setup(t){const e=t,a=f(()=>["flex items-center p-2 hover:bg-tertiary rounded transition-colors",e.collapsed?"justify-center":""]),l=f(()=>e.collapsed?"text-yellow-300":"mr-2 text-yellow-300"),i=f(()=>e.collapsed?"hidden md:hidden":"");return(C,h)=>{const A=E("router-link");return t.item?.to?(g(),ee(A,{key:0,to:t.item.to,"active-class":"bg-tertiary",class:B(a.value)},{default:R(()=>[H(K,{path:t.item.icon,size:20,cls:l.value},null,8,["path","cls"]),r("span",{class:B(i.value)},Z(t.item.label),3)]),_:1},8,["to","class"])):S("",!0)}}},j={__name:"NavbarMenuList",props:{menu:{type:Array,default:()=>[]},collapsed:{type:Boolean,default:!1}},setup(t){return(e,a)=>(g(),V("ul",null,[(g(!0),V(te,null,ae(t.menu,(l,i)=>(g(),V("li",{key:i,class:"mb-2"},[H(ke,{item:l,collapsed:t.collapsed},null,8,["item","collapsed"])]))),128))]))}};var $e="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z",Se="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z",u1="M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z",c1="M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z",d1="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",m1="M3 4V1H5V4H8V6H5V9H3V6H0V4M6 10V7H9V4H16L17.8 6H21C22.1 6 23 6.9 23 8V20C23 21.1 22.1 22 21 22H5C3.9 22 3 21.1 3 20V10M13 19C17.45 19 19.69 13.62 16.54 10.46C13.39 7.31 8 9.55 8 14C8 16.76 10.24 19 13 19M9.8 14C9.8 16.85 13.25 18.28 15.26 16.26C17.28 14.25 15.85 10.8 13 10.8C11.24 10.8 9.8 12.24 9.8 14Z",v1="M22,21H2V3H4V19H6V10H10V19H12V6H16V19H18V14H22V21Z",p1="M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z",f1="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",g1="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",V1="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",h1="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",k="M4 7V21H18V23H4C2.9 23 2 22.1 2 21V7H4M12.8 15.35L9.5 12.05L10.9 10.65L12.8 12.55L17.1 8.25L18.5 9.65L12.8 15.35M20 3C21.1 3 22 3.9 22 5V17C22 18.1 21.1 19 20 19H8C6.9 19 6 18.1 6 17V5C6 3.9 6.9 3 8 3H11.18C11.6 1.84 12.7 1 14 1C15.3 1 16.4 1.84 16.82 3H20M14 3C13.45 3 13 3.45 13 4C13 4.55 13.45 5 14 5C14.55 5 15 4.55 15 4C15 3.45 14.55 3 14 3M10 7V5H8V17H20V5H18V7H10Z",H1="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",y1="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",C1="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",b1="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",L1="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",A1="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z",q="M3,5H9V11H3V5M5,7V9H7V7H5M11,7H21V9H11V7M11,15H21V17H11V15M5,20L1.5,16.5L2.91,15.09L5,17.17L9.59,12.59L11,14L5,20Z",M1="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",w1="M20,5A2,2 0 0,1 22,7V17A2,2 0 0,1 20,19H4C2.89,19 2,18.1 2,17V7C2,5.89 2.89,5 4,5H20M5,16H19L14.5,10L11,14.5L8.5,11.5L5,16Z",De="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",x1="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",_1="M5,3V21H11V17.5H13V21H19V3H5M7,5H9V7H7V5M11,5H13V7H11V5M15,5H17V7H15V5M7,9H9V11H7V9M11,9H13V11H11V9M15,9H17V11H15V9M7,13H9V15H7V13M11,13H13V15H11V13M15,13H17V15H15V13M7,17H9V19H7V17M15,17H17V19H15V17Z",Ze="M19 3V21H13V17.5H11V21H5V3H19M15 7H17V5H15V7M11 7H13V5H11V7M7 7H9V5H7V7M15 11H17V9H15V11M11 11H13V9H11V11M7 11H9V9H7V11M15 15H17V13H15V15M11 15H13V13H11V15M7 15H9V13H7V15M15 19H17V17H15V19M7 19H9V17H7V19M21 1H3V23H21V1Z",k1="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",$1="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",S1="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",D1="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z",Z1="M12,8A1,1 0 0,1 13,9A1,1 0 0,1 12,10A1,1 0 0,1 11,9A1,1 0 0,1 12,8M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,6A3,3 0 0,0 9,9C9,10.31 9.83,11.42 11,11.83V18H13V16H15V14H13V11.83C14.17,11.42 15,10.31 15,9A3,3 0 0,0 12,6Z",B1="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z",D="M19,5V7H15V5H19M9,5V11H5V5H9M19,13V19H15V13H19M9,17V19H5V17H9M21,3H13V9H21V3M11,3H3V13H11V3M21,11H13V21H21V11M11,15H3V21H11V15Z";const Be={class:"h-full w-full bg-secondary text-white p-4"},Ue={class:"h-full flex flex-col"},Ie={class:"md:hidden flex items-center justify-between mb-2"},Fe={class:"mb-4"},Pe={key:0,class:"mb-4"},je={class:"mt-auto"},Re={__name:"AppSidebar",emits:["request-logout","close"],setup(t){const e=z(),a=f(()=>String(e.user?.role||"").toLowerCase()),l=f(()=>a.value==="admin"),i=p([]),C=f(()=>{const M={supervisor:4,manager:3,evaluator:2,member:1};let d=null,x=0;for(const U of i.value||[]){const I=String(U?.membership?.role||U?.UserDepartment?.role||U?.user_department?.role||"").toLowerCase(),F=M[I]||0;F>x&&(d=I,x=F)}return d}),h=f(()=>l.value?"admin":C.value||a.value||"member"),A=f(()=>h.value==="manager"),w=f(()=>h.value==="supervisor"),v=f(()=>h.value==="evaluator"),u=f(()=>h.value==="member");T(async()=>{try{!l.value&&e.user?.id&&(i.value=await b.getDepartments(e.user.id))}catch{}});const y=f(()=>u.value?[{to:"/dashboard",label:"Dashboard",icon:D},{to:"/compliance",label:"Compliance",icon:k}]:v.value?[{to:"/dashboard",label:"Dashboard",icon:D},{to:"/compliance",label:"Compliance",icon:k}]:w.value?[{to:"/dashboard",label:"Dashboard",icon:D},{to:"/standards",label:"Standards",icon:q},{to:"/evaluations",label:"Evaluations",icon:k},{to:"/compliance",label:"Compliance",icon:k}]:A.value?[{to:"/dashboard",label:"Dashboard",icon:D},{to:"/compliance",label:"Compliance",icon:k}]:[{to:"/dashboard",label:"Dashboard",icon:D},{to:"/standards",label:"Standards",icon:q},{to:"/evaluations",label:"Evaluations",icon:k},{to:"/compliance",label:"Compliance",icon:k}]),m=f(()=>l.value||A.value||w.value?[{to:"/user-mgt",label:"User Management",icon:Se},{to:"/department-mgt",label:"Departments",icon:Ze}]:[]),c=f(()=>[{to:"/profile",label:"Profile",icon:$e}]);return(M,d)=>(g(),V("aside",Be,[r("nav",Ue,[r("div",Ie,[d[3]||(d[3]=r("h2",{class:"text-base font-semibold"},"Menu",-1)),r("button",{class:"p-2 rounded hover:bg-white/10",onClick:d[0]||(d[0]=x=>M.$emit("close"))},[...d[2]||(d[2]=[r("i",{class:"mdi mdi-close text-white text-xl"},null,-1)])])]),d[8]||(d[8]=r("h2",{class:"text-lg font-bold mb-4 text-yellow-300"},"Navigation",-1)),r("div",Fe,[d[4]||(d[4]=r("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"General",-1)),H(j,{menu:y.value},null,8,["menu"])]),l.value?(g(),V("div",Pe,[d[5]||(d[5]=r("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"Admin",-1)),H(j,{menu:m.value},null,8,["menu"])])):S("",!0),r("div",je,[d[7]||(d[7]=r("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"Account",-1)),H(j,{menu:c.value},null,8,["menu"]),r("a",{href:"#",onClick:d[1]||(d[1]=se(x=>M.$emit("request-logout"),["prevent","stop"])),class:"flex items-center p-2 hover:bg-tertiary rounded mt-1"},[H(K,{path:O(De),size:20,cls:"mr-2 text-yellow-300"},null,8,["path"]),d[6]||(d[6]=r("span",null,"Log out",-1))])])])]))}},ze={class:"bg-primary p-4 text-center text-white"},Ge={class:"text-sm"},Ne={__name:"AppFooter",setup(t){const e=new Date().getFullYear();return(a,l)=>(g(),V("footer",ze,[r("p",Ge,Z(O(e))+" © DASIG – Dashboard for Academic Systems, Information & Governance ",1),l[0]||(l[0]=r("p",{class:"text-[11px] text-yellow-300 mt-1"},"“DASIG: Energizing Academic Leadership and Governance.”",-1))]))}},qe={id:"wrapper",class:"min-h-screen flex flex-col m-0 p-0 bg-gradient-to-b from-gray-50 to-white"},Ee={key:0,class:"fixed inset-0 bg-white/80 flex justify-center items-center z-50"},Te={class:"sticky top-0 z-20"},Oe={class:"flex flex-1"},Ye={class:"flex-1 m-0 p-0 transition-all duration-200"},Ke={class:"w-full h-full m-0 p-0"},U1={__name:"LayoutAuthenticated",setup(t){const e=z(),a=W(),l=p(!1),i=p(!0),C=p(null);function h(m){const c=m?.avatar;return c?typeof c=="string"?c:typeof c=="object"&&c&&(c.image||c.url)||"":""}const A=f(()=>{const m=h(e.user);if(m)return m;const c=a.selectedUser;return c&&c.id===e.user?.id?h(c):""}),w=async()=>{try{l.value=!0,await e.logout()}finally{l.value=!1}},v=()=>w(),u=()=>{i.value=!i.value},y=f(()=>["transition-all duration-200 overflow-hidden",i.value?"w-64":"w-0"]);return T(()=>{window.toastRef=C.value;const m=e.user?.id;m&&!h(e.user)&&a.fetchById(m).catch(()=>null)}),re(()=>a.selectedUser,m=>{const c=e.user?.id;if(!m||!c||m.id!==c)return;const M={...e.user},d=h(m);d&&(M.avatar=d);const x=typeof m?.cover=="string"?m.cover:m?.cover?.image||m?.cover?.url||"";x&&(M.cover=x),e.user=M}),(m,c)=>(g(),V("div",qe,[l.value?(g(),V("div",Ee,[...c[1]||(c[1]=[r("div",{class:"border-8 border-gray-200 border-t-accent rounded-full w-24 h-24 animate-spin"},null,-1)])])):S("",!0),r("header",Te,[H(Me,{"avatar-src":A.value,open:i.value,onToggle:u,onRequestLogout:v},null,8,["avatar-src","open"]),H(_e,{show:i.value},null,8,["show"])]),r("div",Oe,[r("div",{class:B(y.value)},[H(Re,{onRequestLogout:v,onClose:c[0]||(c[0]=M=>i.value=!1)})],2),r("main",Ye,[r("div",Ke,[Y(m.$slots,"default")])])]),H(Ne),H(le,{ref_key:"toast",ref:C},null,512)]))}},We={},Je={class:"p-4 sm:p-6"};function Qe(t,e){return g(),V("section",Je,[Y(t.$slots,"default")])}const I1=ne(We,[["render",Qe]]);export{f1 as A,x1 as B,b1 as C,g1 as D,V1 as E,y1 as F,H1 as G,I1 as S,U1 as _,Ze as a,q as b,k as c,p1 as d,v1 as e,m1 as f,k1 as g,C1 as h,Se as i,d1 as j,Z1 as k,M1 as l,$e as m,w1 as n,u1 as o,S1 as p,$1 as q,L1 as r,B1 as s,D1 as t,W as u,_1 as v,b as w,c1 as x,A1 as y,h1 as z};
