import{I as W,r as g,A as y,q as J,u as B,c as m,a as V,b as f,e as s,d as Q,j as Z,h as x,t as D,o as z,p as O,B as q,f as b,m as R,k as N,F as X,C as e1,w as t1,l as E,z as a1,U as T}from"./index.DJOQ5Iyl.js";import{_ as Y,T as s1}from"./BaseIcon.uCs_PDtB.js";import{_ as l1}from"./_plugin-vue_export-helper.DlAUqK2U.js";const K=W("user",()=>{const o=g({total:0,totalPages:1,currentPage:1,pageSize:10,data:[]}),e=g(!1),a=g(null),l=g(!1),u=g(null),h=g({}),C=g([]),H=g({}),L=g(null),v=g({}),i=g({}),c=g([]),d=g(null),A=r=>{if(!r?.id)return;const n=o.value.data.findIndex(t=>t.id===r.id);n!==-1&&(o.value.data[n]=r)};return{users:o,selectedUser:u,selectedUserClubs:C,clubsByUser:h,selectedUserClub:L,selectedUserDepartments:c,selectedUserDepartment:d,departmentsByUser:v,departmentInfoCache:i,isLoading:e,error:a,isLoaded:l,fetchAll:async(r={},n=!1)=>{if(a.value=null,!(!n&&l.value))try{e.value=!0;const t=await y.list(r);Object.assign(o.value,{total:t.total||0,totalPages:t.totalPages||1,currentPage:r.page||1,pageSize:r.limit||10,data:t.data||[]}),l.value=!0}catch(t){a.value=t?.response?.data?.message||t?.message||"Failed to fetch users"}finally{e.value=!1}},fetchById:async r=>{a.value=null;try{e.value=!0;const n=await y.getById(r);u.value=n,A(n)}catch(n){a.value=n?.response?.data?.message||n?.message||"Failed to fetch user"}finally{e.value=!1}},create:async r=>{a.value=null;try{e.value=!0;const n=await y.create(r);o.value.data.push(n),o.value.total+=1}catch(n){a.value=n?.response?.data?.message||n?.message||"Failed to create user"}finally{e.value=!1}},updateById:async(r,n)=>{a.value=null;try{e.value=!0;const t=await y.updateById(r,n);return A(t),u.value?.id===r&&(u.value=t),t}catch(t){throw a.value=t?.response?.data?.message||t?.message||"Failed to update user",t}finally{e.value=!1}},deleteById:async r=>{a.value=null;try{e.value=!0,await y.delete(r),o.value.data=o.value.data.filter(n=>n.id!==r),o.value.total=Math.max(0,(o.value.total||1)-1),u.value?.id===r&&(u.value=null)}catch(n){a.value=n?.response?.data?.message||n?.message||"Failed to delete user"}finally{e.value=!1}},uploadAvatar:async(r,n)=>{a.value=null;try{e.value=!0;const t=await y.uploadAvatar(r,n);return A(t),u.value?.id===r&&(u.value=t),t}catch(t){throw a.value=t?.response?.data?.message||t?.message||"Failed to upload avatar",t}finally{e.value=!1}},uploadCover:async(r,n)=>{a.value=null;try{e.value=!0;const t=await y.uploadCover(r,n);return A(t),u.value?.id===r&&(u.value=t),t}catch(t){throw a.value=t?.response?.data?.message||t?.message||"Failed to upload cover",t}finally{e.value=!1}},changePassword:async({old_password:r,new_password:n})=>{a.value=null;try{return e.value=!0,await y.changePassword({old_password:r,new_password:n})}catch(t){throw a.value=t?.response?.data?.message||t?.message||"Failed to change password",t}finally{e.value=!1}},fetchUserClubs:async()=>[],fetchUserClub:async()=>null,fetchUserDepartments:async(r,n=!1)=>{a.value=null;try{if(e.value=!0,!n&&Array.isArray(v.value[r]))return c.value=v.value[r],c.value;const t=await y.getDepartments(r);return v.value[r]=t,c.value=t,t}catch(t){throw a.value=t?.response?.data?.message||t?.message||"Failed to fetch user departments",t}finally{e.value=!1}},fetchUserDepartment:async(r,n,t=!1)=>{a.value=null;const j=`${r}:${n}`;try{if(e.value=!0,!t&&i.value[j])return d.value=i.value[j],d.value;const w=await y.getDepartmentInfo(r,n);return i.value[j]=w,d.value=w,w}catch(w){throw a.value=w?.response?.data?.message||w?.message||"Failed to fetch department info",w}finally{e.value=!1}},resetStore:()=>{o.value={total:0,totalPages:1,currentPage:1,pageSize:10,data:[]},u.value=null,C.value=[],H.value={},L.value=null,l.value=!1,e.value=!1,a.value=null}}}),r1=""+new URL("images/logo-banner.png",import.meta.url).href,n1=""+new URL("images/logo-sm.png",import.meta.url).href,o1={class:"flex justify-between items-center px-4 sm:px-6 py-3 bg-primary text-white"},i1={class:"flex items-center gap-3"},u1={class:"relative flex items-center gap-2"},c1=["aria-expanded"],d1={class:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 grid place-items-center ring-1 ring-gray-200"},v1=["src"],m1={key:1,class:"h-full w-full grid place-items-center text-gray-700 text-xs font-semibold"},p1={class:"font-medium truncate max-w-[12rem] text-left hidden sm:block"},f1={key:1,class:"absolute right-0 top-full mt-2 z-40 w-64 sm:w-80"},g1={class:"relative bg-white text-gray-900 rounded-xl shadow-2xl ring-1 ring-black/5 overflow-hidden"},V1={class:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center ring-1 ring-gray-200"},h1=["src"],H1={key:1,class:"mdi mdi-account text-gray-400 text-xl"},C1={class:"min-w-0 flex-1 text-left"},L1={class:"text-xs text-gray-500 truncate"},y1={class:"px-4 py-2 bg-gray-50 border-t border-gray-200"},b1={__name:"AppHeader",props:{avatarSrc:{type:String,default:""},open:{type:Boolean,default:!0}},emits:["toggle","request-logout"],setup(o){const e=J(),a=B();K();const l=g(!1),u=()=>{l.value=!l.value},h=m(()=>{const v=a.user?.first_name??"",i=a.user?.last_name??"";return[v,i].filter(Boolean).join(" ")||a.user?.email||""}),C=m(()=>{const v=a.user?.avatar;return v?typeof v=="string"?v:typeof v=="object"&&(v.image||v.url)||"":""}),H=v=>String(v||"").split(" ").map(i=>i[0]).join("").slice(0,2).toUpperCase(),L=()=>{l.value=!1,e.push({name:"profile"})};return(v,i)=>(f(),V("div",o1,[s("div",i1,[s("button",{class:"focus:outline-none p-2 rounded hover:bg-white/10",onClick:i[0]||(i[0]=c=>v.$emit("toggle")),"aria-label":"Toggle sidebar"},[s("i",{class:Z(["mdi",o.open?"mdi-menu-open":"mdi-menu","text-white","text-2xl"])},null,2)]),i[3]||(i[3]=Q('<div class="logo-box flex items-center gap-3"><a href="javascript:void(0)" class="flex items-center"><img src="'+r1+'" alt="DASIG" class="hidden md:block" width="158" height="45"><img src="'+n1+'" alt="DASIG" class="block md:hidden" width="36" height="36"></a><span class="hidden lg:block text-sm leading-4 max-w-[18rem]"><span class="font-semibold">DASIG</span><span class="opacity-90"> – Dashboard for Academic Systems, Information &amp; Governance</span></span></div>',1))]),s("nav",u1,[s("button",{class:"flex items-center gap-2 pl-1 pr-2 py-1 rounded-full bg-transparent text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/30",onClick:u,"aria-expanded":l.value?"true":"false"},[s("div",d1,[C.value?(f(),V("img",{key:0,src:C.value,alt:"Avatar",class:"h-full w-full object-cover"},null,8,v1)):(f(),V("div",m1,D(H(h.value)),1))]),s("span",p1,D(h.value),1),s("i",{class:Z(["mdi",l.value?"mdi-chevron-up":"mdi-chevron-down","text-lg text-white/90"])},null,2)],8,c1),l.value?(f(),V("div",{key:0,class:"fixed inset-0 z-30",onClick:i[1]||(i[1]=c=>l.value=!1)})):x("",!0),l.value?(f(),V("div",f1,[i[8]||(i[8]=s("div",{class:"absolute right-4 sm:right-6 -top-2 h-3 w-3 rotate-45 bg-white ring-1 ring-black/5"},null,-1)),s("div",g1,[i[7]||(i[7]=s("div",{class:"px-4 py-3 border-b bg-gray-50"},[s("div",{class:"text-[11px] uppercase tracking-wide text-gray-500"},"Account")],-1)),s("button",{class:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50",onClick:L},[s("div",V1,[o.avatarSrc?(f(),V("img",{key:0,src:o.avatarSrc,alt:"avatar",class:"h-full w-full object-cover"},null,8,h1)):(f(),V("i",H1))]),s("div",C1,[i[4]||(i[4]=s("div",{class:"text-sm font-medium truncate"},"See your profile",-1)),s("div",L1,D(h.value),1)]),i[5]||(i[5]=s("i",{class:"mdi mdi-chevron-right text-gray-400"},null,-1))]),s("div",y1,[s("button",{class:"w-full px-3 py-2 text-sm rounded-lg text-gray-700 hover:bg-gray-100 flex items-center justify-center gap-2",onClick:i[2]||(i[2]=c=>{l.value=!1,v.$emit("request-logout")})},[...i[6]||(i[6]=[s("i",{class:"mdi mdi-logout text-lg"},null,-1),s("span",null,"Log out",-1)])])])])])):x("",!0)])]))}},A1={key:0,class:"md:hidden border-b bg-white"},M1={class:"px-4 py-2 space-x-4"},x1={__name:"AppMobileNav",props:{show:{type:Boolean,default:!1}},setup(o){const e=B(),a=m(()=>String(e.user?.role||"").toLowerCase()),l=m(()=>a.value==="admin"),u=g([]);z(async()=>{try{!l.value&&e.user?.id&&(u.value=await y.getDepartments(e.user.id))}catch{u.value=[]}});const h=m(()=>a.value==="user"&&(!Array.isArray(u.value)||u.value.length===0));return(C,H)=>{const L=O("router-link");return o.show?(f(),V("div",A1,[s("nav",M1,[h.value?x("",!0):(f(),q(L,{key:0,class:"text-sm text-primary hover:underline",to:{name:"dashboard"}},{default:R(()=>[...H[0]||(H[0]=[N("Dashboard",-1)])]),_:1})),b(L,{class:"text-sm text-primary hover:underline",to:{name:"profile"}},{default:R(()=>[...H[1]||(H[1]=[N("Profile",-1)])]),_:1})])])):x("",!0)}}},w1={__name:"NavbarItem",props:{item:{type:Object,required:!0},collapsed:{type:Boolean,default:!1}},setup(o){const e=o,a=m(()=>["flex items-center p-2 hover:bg-tertiary rounded transition-colors",e.collapsed?"justify-center":""]),l=m(()=>e.collapsed?"text-yellow-300":"mr-2 text-yellow-300"),u=m(()=>e.collapsed?"hidden md:hidden":"");return(h,C)=>{const H=O("router-link");return o.item?.to?(f(),q(H,{key:0,to:o.item.to,"active-class":"bg-tertiary",class:Z(a.value)},{default:R(()=>[b(Y,{path:o.item.icon,size:20,cls:l.value},null,8,["path","cls"]),s("span",{class:Z(u.value)},D(o.item.label),3)]),_:1},8,["to","class"])):x("",!0)}}},P={__name:"NavbarMenuList",props:{menu:{type:Array,default:()=>[]},collapsed:{type:Boolean,default:!1}},setup(o){return(e,a)=>(f(),V("ul",null,[(f(!0),V(X,null,e1(o.menu,(l,u)=>(f(),V("li",{key:u,class:"mb-2"},[b(w1,{item:l,collapsed:o.collapsed},null,8,["item","collapsed"])]))),128))]))}};var _1="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z",k1="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z",ne="M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z",oe="M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z",ie="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",ue="M3 4V1H5V4H8V6H5V9H3V6H0V4M6 10V7H9V4H16L17.8 6H21C22.1 6 23 6.9 23 8V20C23 21.1 22.1 22 21 22H5C3.9 22 3 21.1 3 20V10M13 19C17.45 19 19.69 13.62 16.54 10.46C13.39 7.31 8 9.55 8 14C8 16.76 10.24 19 13 19M9.8 14C9.8 16.85 13.25 18.28 15.26 16.26C17.28 14.25 15.85 10.8 13 10.8C11.24 10.8 9.8 12.24 9.8 14Z",ce="M22,21H2V3H4V19H6V10H10V19H12V6H16V19H18V14H22V21Z",de="M16,11.78L20.24,4.45L21.97,5.45L16.74,14.5L10.23,10.75L5.46,19H22V21H2V3H4V17.54L9.5,8L16,11.78Z",ve="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",me="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",pe="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",fe="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",_="M4 7V21H18V23H4C2.9 23 2 22.1 2 21V7H4M12.8 15.35L9.5 12.05L10.9 10.65L12.8 12.55L17.1 8.25L18.5 9.65L12.8 15.35M20 3C21.1 3 22 3.9 22 5V17C22 18.1 21.1 19 20 19H8C6.9 19 6 18.1 6 17V5C6 3.9 6.9 3 8 3H11.18C11.6 1.84 12.7 1 14 1C15.3 1 16.4 1.84 16.82 3H20M14 3C13.45 3 13 3.45 13 4C13 4.55 13.45 5 14 5C14.55 5 15 4.55 15 4C15 3.45 14.55 3 14 3M10 7V5H8V17H20V5H18V7H10Z",ge="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",Ve="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",he="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",He="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",Ce="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",Le="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z",G="M3,5H9V11H3V5M5,7V9H7V7H5M11,7H21V9H11V7M11,15H21V17H11V15M5,20L1.5,16.5L2.91,15.09L5,17.17L9.59,12.59L11,14L5,20Z",ye="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",be="M20,5A2,2 0 0,1 22,7V17A2,2 0 0,1 20,19H4C2.89,19 2,18.1 2,17V7C2,5.89 2.89,5 4,5H20M5,16H19L14.5,10L11,14.5L8.5,11.5L5,16Z",S1="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z",Ae="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",Me="M5,3V21H11V17.5H13V21H19V3H5M7,5H9V7H7V5M11,5H13V7H11V5M15,5H17V7H15V5M7,9H9V11H7V9M11,9H13V11H11V9M15,9H17V11H15V9M7,13H9V15H7V13M11,13H13V15H11V13M15,13H17V15H15V13M7,17H9V19H7V17M15,17H17V19H15V17Z",$1="M19 3V21H13V17.5H11V21H5V3H19M15 7H17V5H15V7M11 7H13V5H11V7M7 7H9V5H7V7M15 11H17V9H15V11M11 11H13V9H11V11M7 11H9V9H7V11M15 15H17V13H15V15M11 15H13V13H11V15M7 15H9V13H7V15M15 19H17V17H15V19M7 19H9V17H7V19M21 1H3V23H21V1Z",xe="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",we="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",_e="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",ke="M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z",Se="M12,8A1,1 0 0,1 13,9A1,1 0 0,1 12,10A1,1 0 0,1 11,9A1,1 0 0,1 12,8M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,6A3,3 0 0,0 9,9C9,10.31 9.83,11.42 11,11.83V18H13V16H15V14H13V11.83C14.17,11.42 15,10.31 15,9A3,3 0 0,0 12,6Z",$e="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z",De="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z",$="M19,5V7H15V5H19M9,5V11H5V5H9M19,13V19H15V13H19M9,17V19H5V17H9M21,3H13V9H21V3M11,3H3V13H11V3M21,11H13V21H21V11M11,15H3V21H11V15Z";const D1={class:"h-full w-full bg-secondary text-white p-4"},Z1={class:"h-full flex flex-col"},U1={class:"md:hidden flex items-center justify-between mb-2"},B1={key:0,class:"text-lg font-bold mb-4 text-yellow-300"},I1={key:1,class:"mb-4"},F1={key:2,class:"mb-4"},j1={class:"mb-4"},P1={__name:"AppSidebar",emits:["request-logout","close"],setup(o){const e=B(),a=m(()=>String(e.user?.role||"").toLowerCase()),l=m(()=>a.value==="admin"),u=g([]),h=m(()=>{const M={supervisor:4,manager:3,evaluator:2,member:1};let p=null,S=0;for(const U of u.value||[]){const I=String(U?.membership?.role||U?.UserDepartment?.role||U?.user_department?.role||"").toLowerCase(),F=M[I]||0;F>S&&(p=I,S=F)}return p}),C=m(()=>l.value?"admin":h.value||a.value||"member"),H=m(()=>C.value==="manager"),L=m(()=>C.value==="supervisor"),v=m(()=>C.value==="evaluator"),i=m(()=>C.value==="member"),c=m(()=>a.value==="user"&&(!Array.isArray(u.value)||u.value.length===0));z(async()=>{try{!l.value&&e.user?.id&&(u.value=await y.getDepartments(e.user.id))}catch{}});const d=m(()=>i.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/compliance",label:"Compliance",icon:_}]:v.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/compliance",label:"Compliance",icon:_}]:L.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/standards",label:"Standards",icon:G},{to:"/evaluations",label:"Evaluations",icon:_},{to:"/compliance",label:"Compliance",icon:_}]:H.value?[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/compliance",label:"Compliance",icon:_}]:[{to:"/dashboard",label:"Dashboard",icon:$},{to:"/standards",label:"Standards",icon:G},{to:"/evaluations",label:"Evaluations",icon:_},{to:"/compliance",label:"Compliance",icon:_}]),A=m(()=>l.value||H.value||L.value?[{to:"/user-mgt",label:"User Management",icon:k1},{to:"/department-mgt",label:"Departments",icon:$1}]:[]),k=m(()=>[{to:"/profile",label:"Profile",icon:_1}]);return(M,p)=>(f(),V("aside",D1,[s("nav",Z1,[s("div",U1,[p[3]||(p[3]=s("h2",{class:"text-base font-semibold"},"Menu",-1)),s("button",{class:"p-2 rounded hover:bg-white/10",onClick:p[0]||(p[0]=S=>M.$emit("close"))},[...p[2]||(p[2]=[s("i",{class:"mdi mdi-close text-white text-xl"},null,-1)])])]),c.value?x("",!0):(f(),V("h2",B1,"Navigation")),c.value?x("",!0):(f(),V("div",I1,[p[4]||(p[4]=s("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"General",-1)),b(P,{menu:d.value},null,8,["menu"])])),l.value&&!c.value?(f(),V("div",F1,[p[5]||(p[5]=s("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"Admin",-1)),b(P,{menu:A.value},null,8,["menu"])])):x("",!0),s("div",j1,[p[7]||(p[7]=s("h3",{class:"text-xs uppercase tracking-wide text-gray-300 mb-2"},"Account",-1)),b(P,{menu:k.value},null,8,["menu"]),s("a",{href:"#",onClick:p[1]||(p[1]=t1(S=>M.$emit("request-logout"),["prevent","stop"])),class:"flex items-center p-2 hover:bg-tertiary rounded mt-1"},[b(Y,{path:E(S1),size:20,cls:"mr-2 text-yellow-300"},null,8,["path"]),p[6]||(p[6]=s("span",null,"Log out",-1))])])])]))}},R1={class:"bg-primary p-4 text-center text-white"},z1={class:"text-sm"},N1={__name:"AppFooter",setup(o){const e=new Date().getFullYear();return(a,l)=>(f(),V("footer",R1,[s("p",z1,D(E(e))+" © DASIG – Dashboard for Academic Systems, Information & Governance ",1),l[0]||(l[0]=s("p",{class:"text-[11px] text-yellow-300 mt-1"},"“DASIG: Energizing Academic Leadership and Governance.”",-1))]))}},G1={id:"wrapper",class:"min-h-screen flex flex-col m-0 p-0 bg-gradient-to-b from-gray-50 to-white"},O1={class:"sticky top-0 z-20"},q1={class:"flex flex-1"},E1={class:"flex-1 m-0 p-0 transition-all duration-200"},T1={class:"w-full h-full m-0 p-0"},Ze={__name:"LayoutAuthenticated",setup(o){const e=B(),a=K(),l=g(!0),u=g(null);function h(c){const d=c?.avatar;return d?typeof d=="string"?d:typeof d=="object"&&d&&(d.image||d.url)||"":""}const C=m(()=>{const c=h(e.user);if(c)return c;const d=a.selectedUser;return d&&d.id===e.user?.id?h(d):""}),H=async()=>{await e.logout()},L=()=>H(),v=()=>{l.value=!l.value},i=m(()=>["transition-all duration-200 overflow-hidden",l.value?"w-64":"w-0"]);return z(()=>{window.toastRef=u.value;const c=e.user?.id;c&&!h(e.user)&&a.fetchById(c).catch(()=>null)}),a1(()=>a.selectedUser,c=>{const d=e.user?.id;if(!c||!d||c.id!==d)return;const A={...e.user},k=h(c);k&&(A.avatar=k);const M=typeof c?.cover=="string"?c.cover:c?.cover?.image||c?.cover?.url||"";M&&(A.cover=M),e.user=A}),(c,d)=>(f(),V("div",G1,[s("header",O1,[b(b1,{"avatar-src":C.value,open:l.value,onToggle:v,onRequestLogout:L},null,8,["avatar-src","open"]),b(x1,{show:l.value},null,8,["show"])]),s("div",q1,[s("div",{class:Z(i.value)},[b(P1,{onRequestLogout:L,onClose:d[0]||(d[0]=A=>l.value=!1)})],2),s("main",E1,[s("div",T1,[T(c.$slots,"default")])])]),b(N1),b(s1,{ref_key:"toast",ref:u},null,512)]))}},Y1={},K1={class:"p-4 sm:p-6"};function W1(o,e){return f(),V("section",K1,[T(o.$slots,"default")])}const Ue=l1(Y1,[["render",W1]]);export{fe as A,ve as B,Ae as C,He as D,pe as E,Ve as F,ge as G,Ue as S,Ze as _,$1 as a,G as b,_ as c,de as d,ce as e,ue as f,xe as g,he as h,k1 as i,ie as j,Se as k,ye as l,_1 as m,be as n,ne as o,_e as p,we as q,Ce as r,$e as s,ke as t,K as u,Me as v,me as w,De as x,oe as y,Le as z};
